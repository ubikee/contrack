(this.webpackJsonpcontracts=this.webpackJsonpcontracts||[]).push([[0],{178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},200:function(e,t,n){},202:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(7),i=n.n(a),o=n(5),s=n(9),u=n.n(s),l=n(17),d=n(37),p=Object(o.h)(window.API||Object({NODE_ENV:"production",PUBLIC_URL:"/ubikee/contrack",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"0.1.2"}).REACT_APP_API,o.l),f={sales:function(){return p.GET("/sales")},sale:function(e){return p.GET("/sales/".concat(e))},addSale:function(e){var t=JSON.stringify(e);return p.POST("/sales",t)},updateSale:function(e,t){var n=JSON.stringify(t);return p.PUT("/sales/".concat(e),n)},deleteSale:function(e){return p.DELETE("/sales/".concat(e))},clearSales:function(){return p.DELETE("/sales")}},j=n(28),b=n(42);n(90),n(205);b.a.apps.length||b.a.initializeApp({apiKey:"AIzaSyAeIpLj4L7EFJcW49RczrG3D3NRxa48Jkw",authDomain:"contrack-57484.firebaseapp.com",projectId:"contrack-57484",storageBucket:"contrack-57484.appspot.com",messagingSenderId:"716933732632",appId:"1:716933732632:web:e6621d6f190d2a7b4e266d",measurementId:"G-M4HQYE8C52"});var O=b.a.auth(),h=b.a.firestore(),x=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.signInWithEmailAndPassword(t,n);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.log("Error login in with password and email",e.t0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}();function v(){return(v=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.collection("contracts").doc(t);case 3:e.sent.delete(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error deleting document",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var y={auth:O,login:x,contracts:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.collection("contracts").get();case 3:return t=e.sent,n=t.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})),e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.error("Error getting collection",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),createContract:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.collection("contracts").add(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding document",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),deleteContract:function(e){return v.apply(this,arguments)}},m=n(4),C=c.a.createContext(),E=function(e){var t=e.children,n=Object(r.useState)([]),c=Object(d.a)(n,2),a=c[0],i=c[1],o=Object(r.useState)(),s=Object(d.a)(o,2),p=s[0],j=s[1];function b(){return(b=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.preorders(t);case 2:n=e.sent,j(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.contracts();case 2:return t=e.sent,i(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.createContract(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.find((function(e){return e.id===t})),j(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(null);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.deleteContract(t);case 2:O();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S={login:function(e,t){y.login(e,t)},addAuthenticationListener:function(e){y.auth.onAuthStateChanged((function(t){t?e&&e(t):console.log("NOT LOGGED")}))},contracts:a,contract:p,loadContract:function(e){return b.apply(this,arguments)},loadContracts:O,createContract:function(e){return x.apply(this,arguments)},selectContract:function(e){return v.apply(this,arguments)},clearContract:function(){return E.apply(this,arguments)},deleteContract:function(e){return g.apply(this,arguments)}};return Object(m.jsx)(C.Provider,{value:S,children:t})},g={id:{id:"id",type:o.o.STRING},service:{id:"service",tye:o.o.STRING,label:"Service",required:!0,options:[{value:"SUPPLY",label:"Supply"},{value:"RENTAL",label:"Rental"},{value:"INSURANCE",label:"Insurance"},{value:"OTHER",label:"Other"}]},affected:{id:"affected",type:o.o.STRING,label:"Affected",required:!0},provider:{id:"provider",type:o.o.STRING,label:"Provider",required:!0},client:{id:"client",type:o.o.STRING,label:"Client",required:!0},description:{id:"description",type:o.o.STRING,label:"Description",required:!0},init:{id:"init",type:o.o.DATE,label:"Init Date",required:!0},length:{id:"length",type:o.o.STRING,label:"Length",required:!0,default:"YEAR",options:[{value:"YEAR",label:"Year"},{value:"MONTH",label:"Month"}]},payment:{id:"payment",type:o.o.NUMBER,label:"Payment",required:!0},frequency:{id:"frequency",type:o.o.STRING,label:"Frequency",required:!0,options:[{value:"YEAR",label:"Year"},{value:"MONTH",label:"Month"}]}},S=(n(178),function(){var e=Object(r.useContext)(C),t=e.contract;if(!t)return Object(m.jsx)("div",{children:"select contract"});var n=new o.b(g,t),c=Object(m.jsxs)(o.p,{use:"headline6",children:[t.description,": ",t.affected]});return Object(m.jsxs)("div",{className:"contract-editor",children:[Object(m.jsx)(o.i,{icon:{icon:"description"},title:c,children:Object(m.jsx)(o.a,{label:"DELETE",action:function(){var n=t.id;e.deleteContract(n)}})}),Object(m.jsx)(o.c,{content:n})]})}),T=(n(179),[{label:"Affected",value:"affected"},{label:"Service",value:"service"},{label:"Provider",value:"provider"},{label:"Client",value:"client"}]),w=function(){var e=Object(r.useContext)(o.n),t=Object(r.useContext)(C),n=Object(r.useState)(1),c=Object(d.a)(n,2),a=c[0],i=(c[1],Object(r.useState)("affected")),s=Object(d.a)(i,2),u=s[0],l=s[1];Object(r.useEffect)((function(){t.loadContracts()}),[]);var p=t.contracts.map((function(e){return Object(j.a)({id:e.id,icon:"description",title:e.description,text:e.service},e)})),f=Object(m.jsx)(o.p,{children:"CONTRACTS"});return Object(m.jsxs)(r.Fragment,{children:[Object(m.jsx)(o.i,{title:f,children:Object(m.jsx)(o.a,{label:"ADD",action:function(){e.openDialog(Object(m.jsx)(o.d,{label:"Create Contract",type:g,onOK:function(e){return t.createContract(e)}}))}})}),Object(m.jsxs)("menu",{children:[Object(m.jsx)(o.f,{label:"Group By",options:T,value:u,onChange:function(e,t){l(t)}}),Object(m.jsx)(o.g,{items:p,group:{by:u},expandAll:!0,onSelect:function(e,n){t.selectContract(e)},selected:a})]}),Object(m.jsx)("main",{children:Object(m.jsx)(S,{})})]})},R=(n(180),n(181),n(43)),A=function(e){var t=e.contracts,n=t.filter((function(e){return"ME"===e.client})),r=t.filter((function(e){return"ME"!==e.client})),c={columns:[{id:"affected",label:"Affected"},{id:"description",label:"Description"},{id:"cost",label:"\u20ac"}],rows:n.map((function(e){return{affected:e.affected,description:e.description,cost:e.payment}}))},a={columns:[{id:"affected",label:"Affected"},{id:"description",label:"Description"},{id:"cost",label:"\u20ac"}],rows:r.map((function(e){return{affected:e.affected,description:e.description,cost:e.payment}}))},i=n.map((function(e){return{angle:e.payment}})),s=r.map((function(e){return{angle:e.payment}})),u=[{x:0,y:n.reduce((function(e,t){return e+parseFloat(t.payment)}),0),color:1,label:"xxx"},{x:1,y:r.reduce((function(e,t){return e+parseFloat(t.payment)}),0),color:2,label:"yy"}];console.log(u);var l=Object(m.jsx)(o.p,{use:"headline6",children:"Monthly Report"});return Object(m.jsxs)("div",{className:"month-report",children:[Object(m.jsx)(o.i,{title:l}),Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(o.i,{title:"Expenses"}),Object(m.jsx)(R.a,{data:i,width:150,height:150}),Object(m.jsx)(o.e,Object(j.a)({},c))]}),Object(m.jsx)("div",{children:Object(m.jsx)(R.c,{width:200,height:200,children:Object(m.jsx)(R.b,{data:u})})}),Object(m.jsxs)("div",{children:[Object(m.jsx)(o.i,{title:"Incomes"}),Object(m.jsx)(R.a,{data:s,width:150,height:150}),Object(m.jsx)(o.e,Object(j.a)({},a))]})]}),Object(m.jsx)("footer",{children:"Total"})]})},N=function(){Object(r.useContext)(o.n);var e=Object(r.useContext)(C),t=e.contracts,n=void 0===t?[]:t;Object(r.useEffect)((function(){e.loadContracts()}),[]);var c=Object(m.jsx)(o.p,{children:"REPORTS"});return Object(m.jsxs)(r.Fragment,{children:[Object(m.jsx)(o.i,{title:c}),Object(m.jsx)("main",{children:Object(m.jsx)(A,{contracts:n})})]})},I=(n(200),function(){var e=Object(r.useContext)(o.n),t=Object(r.useContext)(C);return t.addAuthenticationListener((function(){e.goto("REPORTS")})),Object(m.jsx)("main",{className:"login",children:Object(m.jsx)(o.j,{title:"ContracK",onOK:function(e,n){t.login(e,n)}})})}),k=function(){return Object(m.jsxs)(o.m,{title:"CONTRACK ".concat("0.1.2"),init:"LOGIN",min:!0,lang:"es",dictionary:[],children:[Object(m.jsx)(o.k,{id:"CONTRACTS",section:"B2B",icon:"description",title:"Contracts",layout:"workspace",children:Object(m.jsx)(w,{})}),Object(m.jsx)(o.k,{id:"REPORTS",section:"B2B",icon:"pie_chart",title:"Reports",layout:"workspace",children:Object(m.jsx)(N,{})}),Object(m.jsx)(o.k,{id:"LOGIN",section:"APP",icon:"meeting_room",title:"Exit",layout:"explorer",children:Object(m.jsx)(I,{})})]})},P=function(e){return Object(m.jsx)(E,{children:Object(m.jsx)(k,{})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,222)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};n(201),n(202),n(203);i.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root")),D()}},[[204,1,2]]]);
//# sourceMappingURL=main.60cdc0a8.chunk.js.map